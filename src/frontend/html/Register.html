

<!DOCTYPE html>
<html>
<head>
    <title>Register Page</title>
    <!--Made with love by Mutiullah Samim -->

    <!--Bootsrap 4 CDN-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!--Fontawesome CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!--Custom styles-->
    <link rel="stylesheet" type="text/css" href="../css/Register.css">

    <script src="../js/jquery-2.1.3.min.js"></script>


</head>
<body>
<div class="container">
    <div class="d-flex justify-content-center h-100">
        <div class="card">
            <div class="card-header">
                Sign Up
            </div>
            <div class="card-body">
                <form action="#" method="post" class="form" id="form" role="form">
                    <div class="col-xs-6 card-margin" >
                        <input class="form-control" name="username" placeholder="Username" type="username" />
                    </div>
                    <div class="col-xs-6 card-margin">
                        <input class="form-control" name="password" placeholder="New Password" type="password" />
                    </div>
                    <div class="col-xs-6 card-margin">
                        <input class="form-control" name="email" placeholder="Your Email" type="email" />
                    </div>
                    <div class="row">
                        <label class="radio-inline col-xs-4 col-md-4">
                            <input type="radio" name="gender" id="male" value="1" />
                            Male
                        </label>
                        <label class="radio-inline col-xs-4 col-md-4">
                            <input type="radio" name="gender" id="female" value="0" />
                            Female
                        </label>
                        <label class="radio-inline col-xs-4 col-md-4">
                            <input type="radio" name="gender" id="other" value="-1" />
                            Other
                        </label>
                    </div>
                    <div class="col-xs-6 card-margin">
                        <input class="form-control" name="number" placeholder="Phone Number" type="phone" />
                    </div>
                    <div class="col-xs-6 card-margin">
                        <input class="form-control" name="homeAddress" placeholder="Home Address" type="address" />
                    </div>



                    <br />
                    <br />
                    <button type="submit" id="button-test"  class="btn float-right register_btn" onclick="submitForm()">Sign up</button>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>
<script>
    /**
 * 将form里面的内容序列化成json
 * 相同的checkbox用分号拼接起来
 * @param {dom} 指定的选择器
 * @param {obj} 需要拼接在后面的json对象
 * @method serializeJson
 * */
$.fn.serializeJson=function(otherString){
    var serializeObj={},
        array=this.serializeArray();
    $(array).each(function(){
        if(serializeObj[this.name]){
            serializeObj[this.name]+=';'+this.value;
        }else{
            serializeObj[this.name]=this.value;
        }
    });

    if(otherString!=undefined){
        var otherArray = otherString.split(';');
        $(otherArray).each(function(){
            var otherSplitArray = this.split(':');
            serializeObj[otherSplitArray[0]]=otherSplitArray[1];
        });
    }
    return serializeObj;
};

/** http://18.191.27.125:8082/user/register
 * 将josn对象赋值给form
 * @param {dom} 指定的选择器
 * @param {obj} 需要给form赋值的json对象
 * @method serializeJson
 * */
$.fn.setForm = function(jsonValue){
    var obj = this;
    $.each(jsonValue,function(name,ival){
        var $oinput = obj.find("input[name="+name+"]");
        if($oinput.attr("type")=="checkbox"){
            if(ival !== null){
                var checkboxObj = $("[name="+name+"]");
                var checkArray = ival.split(";");
                for(var i=0;i<checkboxObj.length;i++){
                    for(var j=0;j<checkArray.length;j++){
                        if(checkboxObj[i].value == checkArray[j]){
                            checkboxObj[i].click();
                        }
                    }
                }
            }
        }
        else if($oinput.attr("type")=="radio"){
            $oinput.each(function(){
                var radioObj = $("[name="+name+"]");
                for(var i=0;i<radioObj.length;i++){
                    if(radioObj[i].value == ival){
                        radioObj[i].click();
                    }
                }
            });
        }
        else if($oinput.attr("type")=="textarea"){
            obj.find("[name="+name+"]").html(ival);
        }
        else{
            obj.find("[name="+name+"]").val(ival);
        }
    })
}
function submitForm(){
        var payload = $("#form").serializeJson();
        $.ajax({

            url: "http://18.191.27.125:8082/user/register",
            type: 'POST',
            data : payload,
//            crossDomain : true,
            dataType : 'json',
            success: function (data) {
                console.log(data);
                window.location.href = "Login.html";
            }

        })
    }

</script>